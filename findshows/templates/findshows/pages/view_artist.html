{% extends "localmusic/base.html" %}

{% block content %}
            {% if can_edit %}
                <a class="text-center" href={% url "findshows:edit_artist" artist.pk %}> Edit </a>
            {% endif %}
            <div class="flex flex-row flex-wrap w-full">
        <div class="basis-2 grow flex flex-col content-center justify-around">
            <h1 class="text-8xl text-left text-stone-600">
                {{artist.name}}
            </h1>

            <h2 class="text-center">
                Follow (button)
            </h2>
        </div>

        <div class="w-1/2">
            {% if artist.profile_picture %}
                <img class="h-80 object-contain"
                     src="{{ artist.profile_picture.url }}">
            {% endif %}
        </div>
    </div>
    <div class="flex flex-row flex-wrap w-full">
        <div name="listen-widget" class="flex flex-col content-center w-full sm:w-1/3">
            {% if artist.listen_platform == artist.DSP %}
                {% if artist.listen_type == artist.ALBUM %}
                    <iframe src="https://open.spotify.com/embed/album/{{ artist.listen_ids.0 }}?&theme=0"
                            width="400" height="352" frameBorder="0"
                            allowfullscreen=""
                            allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
                            loading="lazy"></iframe>
                {% elif artist.listen_type == artist.TRACK %}
                    {% for id in artist.listen_ids %}
                        <iframe class="w-full max-h-24"
                                src="https://open.spotify.com/embed/track/{{ id }}"
                                frameBorder="0"
                                allowfullscreen=""
                                allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
                                loading="lazy"></iframe>
                    {% endfor %}
                {% endif %}
            {% elif artist.listen_platform == artist.BANDCAMP %}
                {% if artist.listen_type == artist.ALBUM %}
                    <iframe style="border: 0; width: 100%; height: 360px;"
                            src="https://bandcamp.com/EmbeddedPlayer/album={{ artist.listen_ids.0 }}/size=large/bgcol=ffffff/linkcol=0687f5/artwork=small/transparent=true/"
                            seamless>
                    </iframe>
                {% elif artist.listen_type == artist.TRACK %}
                    {% for id in artist.listen_ids %}
                        <iframe style="border: 0; width: 100%; height: 130px;"
                                src="https://bandcamp.com/EmbeddedPlayer/track={{ id }}/size=medium/bgcol=ffffff/linkcol=0687f5/transparent=true/"
                                seamless>
                        </iframe>
                    {% endfor %}
                {% endif %}
            {% elif artist.listen_platform == artist.SOUNDCLOUD %}
                {% if artist.listen_type == artist.ALBUM %}
                    <iframe width="100%" height="360" scrolling="no" frameborder="no" allow="autoplay"
                            src="https://w.soundcloud.com/player/?url=https://soundcloud.com{{ artist.listen_ids.0 }}&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true"></iframe>
                {% elif artist.listen_type == artist.TRACK %}
                    {% for id in artist.listen_ids %}
                        <iframe width="100%" height="130" scrolling="no" frameborder="no" allow="autoplay"
                                src="https://w.soundcloud.com/player/?url=https://soundcloud.com{{ id }}&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true"></iframe>
                    {% endfor %}
                {% endif %}
            {% endif %}
        </div>

        <div class="basis-1 grow">
            <p class="p-10">
                {{artist.bio}}
            </p>
        </div>
    </div>

    <div class="flex flex-row flex-wrap w-full">
        {% for youtube_id in artist.youtube_ids %}
            <div class="w-1/2">
                <iframe id="ytplayer" type="text/html" width="640" height="360"
                        src="https://www.youtube.com/embed/{{ youtube_id }}?autoplay=0&origin=http://example.com"
                        frameborder="0"></iframe>
            </div>
        {% endfor %}
    </div>

    <div name="upcoming-shows" class="w-full">
    </div>
{% endblock %}
